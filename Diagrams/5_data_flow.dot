digraph DataFlow {
    rankdir=LR;
    nodesep=1.0;
    ranksep=1.5;
    
    node [fontname="Arial", fontsize=10];
    
    // External Entities
    USER [label="User/Student", shape=box3d, fillcolor="#FFE5B4", style=filled];
    TEACHER [label="Tajweed Expert\n(for validation)", shape=box3d, fillcolor="#FFE5B4", style=filled];
    
    // Processes
    P1 [label="1.0\nAudio Input\nProcessing", shape=circle, fillcolor="#E0FFFF", 
        style=filled, width=1.5, height=1.5];
    P2 [label="2.0\nAI Model\nInference", shape=circle, fillcolor="#E0FFFF", 
        style=filled, width=1.5, height=1.5];
    P3 [label="3.0\nError Analysis\n& Correction", shape=circle, fillcolor="#E0FFFF", 
        style=filled, width=1.5, height=1.5];
    P4 [label="4.0\nFeedback\nGeneration", shape=circle, fillcolor="#E0FFFF", 
        style=filled, width=1.5, height=1.5];
    
    // Data Stores
    D1 [label="User Audio\nDatabase", shape=cylinder, fillcolor="#FFB6C1", style=filled];
    D2 [label="AI Models\nRepository", shape=cylinder, fillcolor="#FFB6C1", style=filled];
    D3 [label="Reference Audio\nLibrary", shape=cylinder, fillcolor="#FFB6C1", style=filled];
    D4 [label="User Progress\nDatabase", shape=cylinder, fillcolor="#FFB6C1", style=filled];
    
    // Data flows
    USER -> P1 [label="Audio\nRecitation"];
    P1 -> D1 [label="Store Audio"];
    P1 -> P2 [label="Preprocessed\nAudio"];
    
    D2 -> P2 [label="Load Models"];
    P2 -> P3 [label="Predictions"];
    
    D3 -> P3 [label="Reference\nData"];
    P3 -> P4 [label="Error Report"];
    
    P4 -> D4 [label="Update\nProgress"];
    D4 -> P4 [label="Historical\nData"];
    
    P4 -> USER [label="Feedback &\nCorrections"];
    
    TEACHER -> D2 [label="Model\nValidation", style=dashed];
    TEACHER -> D3 [label="Expert\nRecitations", style=dashed];
}
